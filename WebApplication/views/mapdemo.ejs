
<% include ./layout %>

<div id="googleMap" style="width:100%;height:400px;"></div>


<canvas id="myChart" width="400" height="400"></canvas>

<script>

	function myMap() {
	var mapProp= {
	          center: {lat: -37.8141, lng: 144.9633},
	          zoom: 11,
	          // mapTypeId: google.maps.MapTypeId.SATELLITE
	};
	var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);
	map.data.loadGeoJson('http://data.gov.au/geoserver/vic-suburb-locality-boundaries-psma-administrative-boundaries/wfs?request=GetFeature&typeName=af33dd8c_0534_4e18_9245_fc64440f742e&outputFormat=json');
	// map.data.loadGeoJson('/VICSuburbs.json');

    map.data.setStyle(function(feature) {
      var color = 'gray';
      if (feature.getProperty('isColorful')) {
        color = 'yellow';
      }
      return /** @type {google.maps.Data.StyleOptions} */({
        fillColor: color,
        strokeColor: color,
        strokeWeight: 2
      });
    });

    map.data.addListener('mouseover', function(event) {
  		map.data.revertStyle();
      	map.data.overrideStyle(event.feature, {strokeWeight: 8});
    });

    map.data.addListener('mouseout', function(event) {
      	map.data.revertStyle();
    });

  	var infoWindow;

    infoWindow = new google.maps.InfoWindow;

	map.data.addListener('click', function (event) {
		if(event.feature.getProperty('isColorful')) 
		{
			event.feature.setProperty('isColorful', false);
		}
		else
		{
			event.feature.setProperty('isColorful', true);	
		}
	    var suburb = event.feature.getProperty('vic_loca_2');
	    console.log(" The name of the suburb is " + suburb);

        // Replace the info window's content and position.
        infoWindow.setContent("<p class='map-popup-content' > The name of the suburb is  " + suburb +"</p>");
        infoWindow.setPosition(event.latLng);

        infoWindow.open(map);

	});

	}
</script>


<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBFTcYUCRQyw9P2b-h-_oFyO4Pgr4VOB3E&amp;callback=myMap"></script>


<script>
var ctx = document.getElementById("myChart");
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
        datasets: [{
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255,99,132,1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});
</script>
