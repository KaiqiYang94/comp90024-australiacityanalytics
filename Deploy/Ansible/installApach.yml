# ansible-playbook /Users/KaiqiYang/Documents/Learning/JavaProj/BitBucketPrivateRepo/CloudTestProject/apache.yaml -i /Users/KaiqiYang/Documents/Learning/JavaProj/BitBucketPrivateRepo/CloudTestProject/ansibleTest.yaml --private-key /Users/KaiqiYang/Documents/MasterCourse/Cloud/Assignment2/cloud.key


---
- hosts: dbs
  vars:
    http_port: 80
    max_clients: 200
  # remote_user: root
  tasks:
      - name: terminate other jobs
        shell: set -e

      - name: update packages
        shell: sudo apt-get update || true

      - name: install dependencies
        shell: sudo apt-get --no-install-recommends -y install build-essential pkg-config runit erlang libicu-dev libmozjs185-dev libcurl4-openssl-dev

      - name: download the couchdb file 
        shell: wget http://apache-mirror.rbc.ru/pub/apache/couchdb/source/2.0.0/apache-couchdb-2.0.0.tar.gz

      - name: uncompress the tar
        shell: tar -xvzf apache-couchdb-2.0.0.tar.gz

      - name: cd to the directory
        shell: cd apache-couchdb-2.0.0/
    # - name: Update all packages to the latest version
    #   sudo: yes
    #   shell: deploycouchdb.sh >> scriptOutput.txt

    # - name: Update repositories cache and install "python-pip" package
    #   sudo: yes
    #   apt:
    #     name: python-pip
    #     update_cache: yes
    
    # - name: Remove "pip" package
    #   sudo: yes
    #   apt:
    #     name: python-pip
    #     state: absent

    # - name: install pip
    #   sudo: yes
    #   apt: 
    #     name: python-pip
    #     state: present
    
    # - name: Update repositories cache and install "couchdb-bin" package
    #   sudo: yes
    #   apt:
    #     name: couchdb-bin
    #     update_cache: yes

    # - name: Remove "couchdb" package
    #   sudo: yes
    #   apt:
    #     name: couchdb
    #     state: absent

    # - name: Remove "couchdb-bin" package
    #   sudo: yes
    #   apt:
    #     name: couchdb-bin
    #     state: absent
    
    # - name: Remove "couchdb-common" package
    #   sudo: yes
    #   apt:
    #     name: couchdb-common
    #     state: absent

    # # sudo apt install couchdb-bin
    # - name: install couchdb-bin
    #   sudo: yes
    #   apt: 
    #     name: couchdb-bin
    #     state: present

    # - name: install couchdb
    #   sudo: yes
    #   apt: 
    #     name: couchdb
    #     state: present

    # # sudo apt install upstart
    # - name: install upstart
    #   sudo: yes
    #   apt:
    #     name: upstart
    #     state: present

    # - name: install yum
    #   sudo: yes
    #   apt:
    #     name: yum
    #     state: present


...